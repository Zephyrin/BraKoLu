<div class="full-width">
  <mat-tab-group [selectedIndex]="displayService.formSelectedOrder.value"
                 mat-align-tabs="center"
                 class="full-width"
                 (selectedIndexChange)="displayService.changeSelectedIndex($event)">
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon svgIcon="truck-check"></mat-icon>
        Commandes
        <mat-icon svgIcon="arrow-expand-down"
                  *ngIf="displayService.formSelectedOrder.value === 0"></mat-icon>
        <mat-icon svgIcon="arrow-expand-right"
                  *ngIf="displayService.formSelectedOrder.value > 0"></mat-icon>
      </ng-template>
      <div class="inline">
        <div class="filter-container"
             [@filterExpand]="displayService.filterOrder ? 'expanded' : 'collapsed'">
          <h1>Ã‰tat</h1>
          <app-order-filter (selectedStates)="selectedStatesChange($event)"></app-order-filter>
        </div>
        <div class="full-width padding">
          <app-table [service]="service"
                     class="full-width"
                     [allowSelection]="!service.loadingSource
                  && !displayService.brewService.loadingSource
                  && !displayService.supplierService.loadingSource"
                     #tableComponent></app-table>
          <app-pagination [paginate]="service.paginate"></app-pagination>
        </div>
      </div>
    </mat-tab>
    <mat-tab *ngFor="let order of displayService.selectedOrders; let index = index"
             [ngSwitch]="order.state">
      <ng-template mat-tab-label>
        {{service.getDisplay('tabOrder', order)}}
        <button mat-icon-button
                (click)="displayService.closeTab($event, order, index)">
          <mat-icon>close</mat-icon>
        </button>
      </ng-template>
      <div class="full-width padding">
        <app-order-detail-creation *ngSwitchCase="'created'"
                                   [order]="order"></app-order-detail-creation>
        <app-order-detail *ngSwitchDefault
                          class="padding"
                          [order]="order"></app-order-detail>
      </div>

    </mat-tab>
  </mat-tab-group>
</div>
