<div class="inline-header">
  <!-- BOUTON AJOUTER INGREDIENT -->
  <button mat-icon-button
          (click)="openCreateDialog()"
          [matTooltip]="'Ajouter un ingrédient type à la base de données'">
    <mat-icon>add_circle_outline</mat-icon>
    <mat-label> Ajouter ingrédient</mat-label>
  </button>

  <!-- BOITE RECHERCHE -->
  <form [formGroup]="searchForm">
    <mat-form-field>
      <mat-label>Recherche</mat-label>
      <input matInput
             id="searchText"
             formControlName="search"
             type="search"
             aria-label="Recherche">
      <button for="searchText"
              mat-icon-button
              matSuffix
              type="submit"
              (click)="search()">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </form>
</div>

<div class="inline-center">
  <!-- FILTRES TYPES INGREDIENTS -->
  <mat-chip-list aria-label="Sélection des types d'ingrédients"
                 [multiple]="true"
                 (change)="selectionChange($event)"
                 [selectable]="true">
    <mat-chip *ngFor="let childName of getSearch.ingredientSearch.selectChildren"
              [selected]="childName.selected"
              (selectionChange)="selectionChange($event)"
              (click)="selectIngredientChange(childName)">{{childName.viewValue}}</mat-chip>
  </mat-chip-list>
</div>

<!-- TABLEAU DES INGREDIENTS -->
<table mat-table
       class="full-width"
       #matTable
       matSort
       [dataSource]="dataSource">
  <ng-container *ngFor="let header of getService.headers"
                [matColumnDef]="header.value">
    <th mat-header-cell
        *matHeaderCellDef
        [mat-sort-header]="header.value"> {{header.viewValue}} </th>
    <td mat-cell
        *matCellDef="let element">
      <span *ngIf="header.value !== 'harvestYear' && header.value !== 'productionYear'"> {{element[header.value]}}
      </span>
      <span *ngIf="header.value === 'harvestYear'"> {{element[header.value] | date: 'y'}} </span>
      <span *ngIf="header.value === 'productionYear'"> {{element[header.value] | date: 'MM-y' }} </span>
    </td>
  </ng-container>
  <tr mat-header-row
      *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row
      *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<app-pagination [paginate]="service.paginate"></app-pagination>
